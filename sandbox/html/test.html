<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="3600" />
  <meta name="revisit-after" content="2 days" />
  <meta name="robots" content="index,follow" />
  <meta name="publisher" content="Dichodaemon" />
  <meta name="copyright" content="Dichodaemon" />

  <meta name="author" content="Dichodaemon" />
  <meta name="distribution" content="global" />
  <meta name="description" content="Ocatarinetabellachithchix" />
  <meta name="keywords" content="arzaversperia flexilimosos toves" />
  <link rel="stylesheet" type="text/css" media="screen,projection,print" href="css/espresso_libre.css" />
  <title>espresso_libre</title>

</head>

<body>
<pre class ="espresso_libre">
<span class="line-numbers">   1 </span> <span class="keyword">require</span> <span class="string"><span class="string">'</span>textpow<span class="string">'</span></span>
<span class="line-numbers">   2 </span> <span class="keyword">require</span> <span class="string"><span class="string">'</span>highray/html_processor.rb<span class="string">'</span></span>
<span class="line-numbers">   3 </span> 
<span class="line-numbers">   4 </span> 
<span class="line-numbers">   5 </span> <span class="keyword">module</span> <span class="type_name">Highray</span>
<span class="line-numbers">   6 </span> 
<span class="line-numbers">   7 </span>    <span class="keyword">def</span> <span class="function_name">Highray.init_syntaxes</span>
<span class="line-numbers">   8 </span>       <span class="variable"><span class="variable">@</span>syntaxes</span> <span class="keyword">=</span> {}
<span class="line-numbers">   9 </span>       <span class="library_object">Dir</span>.<span class="function_name">glob</span>( <span class="library_object">File</span>.<span class="function_name">join</span>(<span class="library_object">File</span>.<span class="function_name">dirname</span>(<span class="variable">__FILE__</span>), <span class="string"><span class="string">'</span>..<span class="string">'</span></span>, <span class="string"><span class="string">'</span>syntax<span class="string">'</span></span>, <span class="string"><span class="string">'</span>*.yaml<span class="string">'</span></span>) ).<span class="function_name">each</span> <span class="keyword">do </span>|<span class="variable">f</span>| 
<span class="line-numbers">  10 </span>          <span class="variable"><span class="variable">@</span>syntaxes</span>[<span class="library_object">File</span>.<span class="function_name">basename</span>(f, <span class="string"><span class="string">'</span>.yaml<span class="string">'</span></span>)] <span class="keyword">=</span> <span class="library_object">Textpow</span>::<span class="function_name">SyntaxNode</span>.<span class="function_name">load</span>( f )
<span class="line-numbers">  11 </span>       <span class="keyword">end</span>
<span class="line-numbers">  12 </span>    <span class="keyword">end</span>
<span class="line-numbers">  13 </span>    
<span class="line-numbers">  14 </span>    <span class="keyword">def</span> <span class="function_name">Highray.syntaxes</span>
<span class="line-numbers">  15 </span>       <span class="library_object">Dir</span>.<span class="function_name">glob</span>( <span class="library_object">File</span>.<span class="function_name">join</span>(<span class="library_object">File</span>.<span class="function_name">dirname</span>(<span class="variable">__FILE__</span>), <span class="string"><span class="string">'</span>..<span class="string">'</span></span>, <span class="string"><span class="string">'</span>syntax<span class="string">'</span></span>, <span class="string"><span class="string">'</span>*.yaml<span class="string">'</span></span>) ).<span class="function_name">collect</span> <span class="keyword">do </span>|<span class="variable">f</span>| 
<span class="line-numbers">  16 </span>          <span class="library_object">File</span>.<span class="function_name">basename</span>(f, <span class="string"><span class="string">'</span>.yaml<span class="string">'</span></span>)
<span class="line-numbers">  17 </span>       <span class="keyword">end</span>
<span class="line-numbers">  18 </span>    <span class="keyword">end</span>
<span class="line-numbers">  19 </span>    
<span class="line-numbers">  20 </span>    <span class="keyword">def</span> <span class="function_name">Highray.themes</span>
<span class="line-numbers">  21 </span>       <span class="library_object">Dir</span>.<span class="function_name">glob</span>( <span class="library_object">File</span>.<span class="function_name">join</span>(<span class="library_object">File</span>.<span class="function_name">dirname</span>(<span class="variable">__FILE__</span>), <span class="string"><span class="string">'</span>..<span class="string">'</span></span>, <span class="string"><span class="string">'</span>render<span class="string">'</span></span>, <span class="string"><span class="string">'</span>*.css<span class="string">'</span></span>) ).<span class="function_name">collect</span> <span class="keyword">do </span>|<span class="variable">f</span>| 
<span class="line-numbers">  22 </span>          <span class="library_object">File</span>.<span class="function_name">basename</span>(f, <span class="string"><span class="string">'</span>.css<span class="string">'</span></span>)
<span class="line-numbers">  23 </span>       <span class="keyword">end</span>
<span class="line-numbers">  24 </span>    <span class="keyword">end</span>
<span class="line-numbers">  25 </span> 
<span class="line-numbers">  26 </span>    <span class="keyword">def</span> <span class="function_name">Highray.syntax_for_file</span> file_name
<span class="line-numbers">  27 </span>       init_syntaxes <span class="keyword">unless</span> <span class="variable"><span class="variable">@</span>syntaxes</span>
<span class="line-numbers">  28 </span>       first_line <span class="keyword">=</span> <span class="string"><span class="string">&quot;</span><span class="string">&quot;</span></span>
<span class="line-numbers">  29 </span>       <span class="library_object">File</span>.<span class="function_name">open</span>( file_name, <span class="string"><span class="string">'</span>r<span class="string">'</span></span> ) { |<span class="variable">f</span>|
<span class="line-numbers">  30 </span>          <span class="keyword">while</span> (first_line <span class="keyword">=</span> f.<span class="function_name">readline</span>).<span class="function_name">strip</span>.<span class="function_name">size</span> <span class="keyword">==</span> <span class="number">0</span>; <span class="keyword">end</span>
<span class="line-numbers">  31 </span>       }
<span class="line-numbers">  32 </span>       result <span class="keyword">=</span> []
<span class="line-numbers">  33 </span>       <span class="variable"><span class="variable">@</span>syntaxes</span>.<span class="function_name">each</span> <span class="keyword">do </span>|<span class="variable">key</span>, <span class="variable">value</span>|
<span class="line-numbers">  34 </span>          assigned <span class="keyword">=</span> <span class="builtin_constant">false</span>
<span class="line-numbers">  35 </span>          <span class="keyword">if</span> value.<span class="function_name">fileTypes</span>
<span class="line-numbers">  36 </span>             value.<span class="function_name">fileTypes</span>.<span class="function_name">each</span> <span class="keyword">do </span>|<span class="variable">t</span>|
<span class="line-numbers">  37 </span>                <span class="keyword">if</span> t <span class="keyword">==</span> <span class="library_object">File</span>.<span class="function_name">basename</span>( file_name ) <span class="keyword">||</span> t <span class="keyword">==</span> <span class="library_object">File</span>.<span class="function_name">extname</span>( file_name )[<span class="number">1</span>..<span class="keyword">-</span><span class="number">1</span>]
<span class="line-numbers">  38 </span>                   result <span class="keyword">&lt;&lt;</span> [key, value] 
<span class="line-numbers">  39 </span>                   assigned <span class="keyword">=</span> <span class="builtin_constant">true</span>
<span class="line-numbers">  40 </span>                   <span class="keyword">break</span>
<span class="line-numbers">  41 </span>                <span class="keyword">end</span>
<span class="line-numbers">  42 </span>             <span class="keyword">end</span>
<span class="line-numbers">  43 </span>          <span class="keyword">end</span>
<span class="line-numbers">  44 </span>          <span class="keyword">unless</span> assigned
<span class="line-numbers">  45 </span>             <span class="keyword">if</span> value.<span class="function_name">firstLineMatch</span> <span class="keyword">&amp;&amp;</span> value.<span class="function_name">firstLineMatch</span> <span class="keyword">=~</span> first_line
<span class="line-numbers">  46 </span>                result <span class="keyword">&lt;&lt;</span> [key, value] 
<span class="line-numbers">  47 </span>             <span class="keyword">end</span>
<span class="line-numbers">  48 </span>          <span class="keyword">end</span>
<span class="line-numbers">  49 </span>       <span class="keyword">end</span>
<span class="line-numbers">  50 </span>       result
<span class="line-numbers">  51 </span>    <span class="keyword">end</span>
<span class="line-numbers">  52 </span>    
<span class="line-numbers">  53 </span>    <span class="keyword">def</span> <span class="function_name">Highray.parse</span> text, syntax_name <span class="keyword">=</span> <span class="builtin_constant">nil</span>, line_numbers <span class="keyword">=</span> <span class="builtin_constant">false</span>, render_style <span class="keyword">=</span> <span class="string"><span class="string">&quot;</span>classic<span class="string">&quot;</span></span>
<span class="line-numbers">  54 </span>       init_syntaxes <span class="keyword">unless</span> <span class="variable"><span class="variable">@</span>syntaxes</span>
<span class="line-numbers">  55 </span>       renderer <span class="keyword">=</span> <span class="library_object">File</span>.<span class="function_name">join</span>( <span class="library_object">File</span>.<span class="function_name">dirname</span>(<span class="variable">__FILE__</span>), <span class="string"><span class="string">'</span>..<span class="string">'</span></span>,<span class="string"><span class="string">&quot;</span>render<span class="string">&quot;</span></span>,<span class="string"><span class="string">&quot;</span><span class="string_interpolation"><span class="string_interpolation">#{</span>render_style<span class="string_interpolation">}</span></span>.render<span class="string">&quot;</span></span>)
<span class="line-numbers">  56 </span>       css_class <span class="keyword">=</span> render_style
<span class="line-numbers">  57 </span>       render_options <span class="keyword">=</span> <span class="variable">YAML</span>.<span class="function_name">load</span>( <span class="library_object">File</span>.<span class="function_name">open</span>(  renderer ) )
<span class="line-numbers">  58 </span>       render_processor <span class="keyword">=</span> <span class="library_object">HtmlProcessor</span>.<span class="function_name">new</span>( render_options, line_numbers )
<span class="line-numbers">  59 </span> 
<span class="line-numbers">  60 </span>       <span class="variable"><span class="variable">@</span>syntaxes</span>[syntax_name].<span class="function_name">parse</span>( text,  render_processor )
<span class="line-numbers">  61 </span>       <span class="string"><span class="string">&quot;</span>&lt;pre class =<span class="string_interpolation">\&quot;</span><span class="string_interpolation"><span class="string_interpolation">#{</span>css_class<span class="string_interpolation">}</span></span><span class="string_interpolation">\&quot;</span>&gt;<span class="string_interpolation">\n</span><span class="string_interpolation"><span class="string_interpolation">#{</span>render_processor<span class="string_interpolation"><span class="string_interpolation">.</span><span class="function_name">string</span></span><span class="string_interpolation">}</span></span><span class="string_interpolation">\n</span>&lt;/pre&gt;<span class="string">&quot;</span></span>
<span class="line-numbers">  62 </span>    <span class="keyword">end</span>
<span class="line-numbers">  63 </span> 
<span class="line-numbers">  64 </span>    <span class="keyword">def</span> <span class="function_name">Highray.debug</span> text, syntax_name
<span class="line-numbers">  65 </span>       <span class="keyword">unless</span> <span class="variable"><span class="variable">@</span>syntaxes</span>
<span class="line-numbers">  66 </span>          <span class="variable"><span class="variable">@</span>syntaxes</span> <span class="keyword">=</span> {}
<span class="line-numbers">  67 </span>          <span class="library_object">Dir</span>.<span class="function_name">glob</span>( <span class="library_object">File</span>.<span class="function_name">join</span>(<span class="library_object">File</span>.<span class="function_name">dirname</span>(<span class="variable">__FILE__</span>), <span class="string"><span class="string">'</span>..<span class="string">'</span></span>, <span class="string"><span class="string">'</span>syntax<span class="string">'</span></span>, <span class="string"><span class="string">'</span>*.yaml<span class="string">'</span></span>) ).<span class="function_name">each</span> <span class="keyword">do </span>|<span class="variable">f</span>| 
<span class="line-numbers">  68 </span>             <span class="variable"><span class="variable">@</span>syntaxes</span>[<span class="library_object">File</span>.<span class="function_name">basename</span>(f, <span class="string"><span class="string">'</span>.yaml<span class="string">'</span></span>)] <span class="keyword">=</span> <span class="library_object">Textpow</span>::<span class="function_name">SyntaxNode</span>.<span class="function_name">load</span>( f )
<span class="line-numbers">  69 </span>          <span class="keyword">end</span>
<span class="line-numbers">  70 </span>       <span class="keyword">end</span>
<span class="line-numbers">  71 </span>       processor <span class="keyword">=</span> <span class="library_object">Textpow</span>::<span class="function_name">DebugProcessor</span>.<span class="function_name">new</span>
<span class="line-numbers">  72 </span> 
<span class="line-numbers">  73 </span>       <span class="variable"><span class="variable">@</span>syntaxes</span>[syntax_name].<span class="function_name">parse</span>( text, processor )
<span class="line-numbers">  74 </span>    <span class="keyword">end</span>
<span class="line-numbers">  75 </span> 
<span class="line-numbers">  76 </span> <span class="keyword">end</span>
</pre>
  <p>
    <a href="http://validator.w3.org/check?uri=referer">
      <img style="border:0"
           src="http://www.w3.org/Icons/valid-xhtml10"
           alt="Valid XHTML 1.0 Strict" height="31" width="88" />
    </a>
    <a href="http://jigsaw.w3.org/css-validator/check?uri=referer">
      <img style="border:0;width:88px;height:31px"
           src="http://jigsaw.w3.org/css-validator/images/vcss" 
           alt="Valid CSS!" />
    </a>
  </p>
</body>
</html>
